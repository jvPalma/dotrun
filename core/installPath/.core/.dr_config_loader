#!/usr/bin/env bash

# DotRun Configuration
# This file is managed by DotRun. Manual edits may be overwritten.
# Use 'dr config set/get/unset' commands to manage configuration.

#* =================== SHELL CONFIGURATIONS ====== *#
# Detect current shell
if [ -n "$BASH_VERSION" ]; then
  CURRENT_SHELL="bash"
elif [ -n "$ZSH_VERSION" ]; then
  CURRENT_SHELL="zsh"
elif [ -n "$FISH_VERSION" ]; then
  CURRENT_SHELL="fish"
else
  CURRENT_SHELL="unknown"
fi
export CURRENT_SHELL

# Add ~/.local/bin to PATH if not already present
case ":$PATH:" in
  *":$HOME/.local/bin:"*) ;;
  *) export PATH="$HOME/.local/bin:$PATH" ;;
esac

SHELL_COMPLETION="$DR_CONFIG/.core/dr_completion"
SHELL_CONFIGS="$DR_CONFIG/config/shell"
SHELL_ALIASES="$DR_CONFIG/aliases/shell"

[[ $CURRENT_SHELL == "bash" ]] && {
  SHELL_COMPLETION="$SHELL_COMPLETION.bash"
  SHELL_CONFIGS="$SHELL_CONFIGS/bash_config"
  SHELL_ALIASES="$SHELL_ALIASES/bash_aliases"
}

[[ $CURRENT_SHELL == "zsh" ]] && {
  SHELL_COMPLETION="$SHELL_COMPLETION.zsh"
  SHELL_CONFIGS="$SHELL_CONFIGS/zsh_config"
  SHELL_ALIASES="$SHELL_ALIASES/zsh_aliases"
}

[[ $CURRENT_SHELL == "fish" ]] && {
  SHELL_COMPLETION="$SHELL_COMPLETION.fish"
  SHELL_CONFIGS="$SHELL_CONFIGS/fish_config"
  SHELL_ALIASES="$SHELL_ALIASES/fish_aliases"
}

if [ -f "$SHELL_COMPLETION" ]; then
  source "$SHELL_COMPLETION"
fi

if [ -f "$SHELL_ALIASES" ]; then
  source "$SHELL_ALIASES"
fi

if [ -f "$SHELL_CONFIGS" ]; then
  source "$SHELL_CONFIGS"
fi
